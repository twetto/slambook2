# 第七講: 視覺里程計1

## 特徵點法

我們從圖像中選取具有代表性的點，以此來估計相機姿態。這些點能夠擁有以下性質：

1. 可重複性(Repeatability): 可重複被偵測到
2. 可區別性(Distinctiveness): 可與其他點區別開來
3. 高效率(Efficiency): 點的數量要遠小於整張圖的像素數量
4. 本地性(Locality): 僅須整張圖的一小部份就可以描述這個點

我們要對特徵點進行匹配，通常會有兩大派，一派使用描述子，一派使用光流。使用光流的前提是我們必須假設相機拍到的畫面是連續的。如果相機兩幀之間位移太大，那使用描述子會有比較好的匹配效果。如果想要進行回環檢測，光流是辦不到的，畢竟繞了一圈回來我們已經失去連續畫面的假設了；因此實務上，將光流與描述子相結合的算法也不在少數。

接下來書中介紹了FAST/ORB/BRIEF。ORB在FAST上加了金字塔法與灰度質心法，來得到尺度與旋轉的描述。配合上BRIEF描述子，完整的ORB提取/匹配方案就完成了。

## 實踐: 特徵點提取與匹配

## 2D-2D: 對極幾何

## 實踐: 對極約束求解相機運動

## 三角測量

## 實踐: 三角測量

## 3D-2D: PnP

## 實踐: 求解PnP

## 3D-3D: ICP

## 實踐: 求解ICP

## 習題

**請說說SIFT或SURF的原理，並對比它們與ORB之間的優劣。**

**設計程序調用OpenCV中的其他種類特徵點。統計在提取1000個特徵點時在你的機器上所用的時間。**

**我們發現OpenCV提供的ORB特徵點在圖像中分佈不夠均勻。你是否能夠找到或提出讓特徵點分佈更均勻的方法?**

**研究FLANN為何能夠快速處理匹配問題。除了FLANN，還有哪些可以加速匹配的手段？**

**把演示程式使用的EPnP改成其他PnP方法，並研究它們的工作原理。**

**在PnP最佳化中，將第一個相機的觀測也考慮進來，程式應如何書寫？最後結果會有何變化？**

**在ICP程式中，將空間點也作為最佳化變量考慮進來，程式應如何書寫？最後結果會有何變化？**

**在特徵點匹配過程中，不可避免的會遇到誤匹配的情況。如果我們把錯誤匹配輸入到PnP或ICP中，會發生怎樣的情況？你能想到哪些避免誤匹配的方法？**

**使用Sophus的SE3 class，自己設計g2o的節點與邊，實現PnP和ICP最佳化。**

**在Ceres中實現PnP和ICP的最佳化。**

